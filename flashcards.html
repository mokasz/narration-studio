<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å…ƒå·ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ | ç¤¾ä¼š6å¹´</title>

  <!-- ============================================
       CSS STYLES
       ============================================ -->
  <style>
    /* ========== CSS Variables ========== */
    :root {
      --primary-color: #4A90E2;
      --primary-hover: #357ABD;
      --background-color: #F5F7FA;
      --card-background: #FFFFFF;
      --text-primary: #333333;
      --text-secondary: #666666;
      --text-hint: #999999;
      --border-color: #E1E4E8;
      --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
      --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
      --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);
      --border-radius: 12px;
      --transition-speed: 0.3s;
      --flip-speed: 0.6s;
    }

    /* ========== Reset & Base Styles ========== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans',
                   'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
      background-color: var(--background-color);
      color: var(--text-primary);
      line-height: 1.6;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* ========== Layout ========== */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 15px;
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }

    /* ========== Header ========== */
    header {
      text-align: center;
      margin-bottom: 10px;
      flex-shrink: 0;
    }

    h1 {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-bottom: 5px;
      font-weight: 600;
    }

    .header-subtitle {
      display: none; /* Hide subtitle to save space */
    }

    .header-info {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 8px;
    }

    .progress-info {
      font-size: 1rem;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .progress-bar-container {
      width: 200px;
      height: 8px;
      background-color: #E1E4E8;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background-color: var(--primary-color);
      transition: width var(--transition-speed);
      width: 0%;
    }

    .group-filter {
      padding: 8px 16px;
      font-size: 0.95rem;
      border: 2px solid var(--border-color);
      border-radius: 8px;
      background-color: var(--card-background);
      color: var(--text-primary);
      cursor: pointer;
      transition: all var(--transition-speed);
      font-family: inherit;
    }

    .group-filter:hover {
      border-color: var(--primary-color);
    }

    .group-filter:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
    }

    /* ========== Main Card Area ========== */
    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      min-height: 0;
      overflow: hidden;
    }

    .card-container {
      perspective: 1000px;
      width: 100%;
      max-width: 600px;
      height: 100%;
      max-height: 450px;
      display: flex;
      align-items: center;
    }

    .card {
      position: relative;
      width: 100%;
      height: 100%;
      cursor: pointer;
      transition: transform var(--flip-speed);
      transform-style: preserve-3d;
    }

    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: var(--card-background);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-md);
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      padding: 25px 20px;
      transition: box-shadow var(--transition-speed);
    }

    .card:hover .card-face {
      box-shadow: var(--shadow-lg);
    }

    .card-front {
      transform: rotateY(0deg);
    }

    .card-back {
      transform: rotateY(180deg);
    }

    .card-header {
      font-size: 0.85rem;
      color: var(--text-hint);
      margin-bottom: 10px;
      font-weight: 500;
      letter-spacing: 0.5px;
      flex-shrink: 0;
    }

    .card-content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 1.2rem;
      line-height: 1.8;
      color: var(--text-primary);
      overflow-y: auto;
      padding: 5px 0;
    }

    .card-back .card-content {
      font-size: 2rem;
      font-weight: 600;
      color: var(--primary-color);
    }

    .card-footer {
      margin-top: 10px;
      text-align: center;
      font-size: 0.8rem;
      color: var(--text-hint);
      font-style: italic;
      flex-shrink: 0;
    }

    /* ========== Controls ========== */
    .controls {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      flex-shrink: 0;
    }

    .btn {
      padding: 8px 16px;
      font-size: 0.9rem;
      font-weight: 500;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all var(--transition-speed);
      font-family: inherit;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: var(--shadow-sm);
    }

    .btn-primary {
      background-color: var(--primary-color);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--primary-hover);
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: var(--shadow-sm);
    }

    .btn-secondary {
      background-color: var(--card-background);
      color: var(--text-primary);
      border: 2px solid var(--border-color);
    }

    .btn-secondary:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }

    .btn-secondary:active {
      transform: translateY(0);
      box-shadow: var(--shadow-sm);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    /* ========== Answer Buttons (Correct/Incorrect) ========== */
    .answer-buttons {
      margin-top: auto;
      padding-top: 15px;
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      flex-shrink: 0;
    }

    .btn-correct,
    .btn-incorrect {
      flex: 1;
      min-width: 120px;
      max-width: 180px;
      font-weight: 600;
      padding: 10px 20px;
    }

    .btn-correct {
      background-color: #4CAF50;
      color: white;
    }

    .btn-correct:hover {
      background-color: #45a049;
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }

    .btn-incorrect {
      background-color: #f44336;
      color: white;
    }

    .btn-incorrect:hover {
      background-color: #da190b;
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }

    /* ========== Status Messages ========== */
    .status-message {
      text-align: center;
      margin-top: 8px;
      padding: 10px;
      border-radius: 6px;
      font-weight: 500;
      font-size: 0.9rem;
      display: none;
      flex-shrink: 0;
    }

    .status-message.visible {
      display: block;
    }

    .status-success {
      background-color: #E8F5E9;
      color: #2E7D32;
      border: 2px solid #4CAF50;
    }

    .status-info {
      background-color: #E3F2FD;
      color: #1565C0;
      border: 2px solid #2196F3;
    }

    /* ========== Remaining Cards Counter ========== */
    .remaining-cards {
      text-align: center;
      margin-top: 8px;
      font-size: 1rem;
      color: var(--text-secondary);
      font-weight: 500;
      flex-shrink: 0;
    }

    .remaining-cards .count {
      font-size: 1.2rem;
      color: var(--primary-color);
      font-weight: 700;
    }

    /* ========== Footer ========== */
    footer {
      text-align: center;
      padding: 10px;
      color: var(--text-secondary);
      font-size: 0.75rem;
      border-top: 1px solid var(--border-color);
      margin-top: 10px;
      flex-shrink: 0;
    }

    .shortcuts {
      margin-top: 5px;
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .shortcut-item {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 0.7rem;
    }

    .key {
      background-color: var(--card-background);
      border: 1px solid var(--border-color);
      border-radius: 3px;
      padding: 1px 6px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.7rem;
      color: var(--text-primary);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    /* ========== Responsive Design ========== */
    /* Tablet and below */
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }

      h1 {
        font-size: 1.4rem;
      }

      .header-info {
        gap: 10px;
      }

      .progress-bar-container {
        width: 120px;
      }

      .card-container {
        max-height: 400px;
      }

      .card-face {
        padding: 20px 15px;
      }

      .card-content {
        font-size: 1.25rem;
      }

      .card-back .card-content {
        font-size: 2rem;
      }

      .btn {
        padding: 7px 14px;
        font-size: 0.85rem;
      }

      .controls {
        gap: 6px;
        margin-top: 8px;
      }

      footer {
        padding: 8px;
        font-size: 0.7rem;
      }

      .shortcuts {
        gap: 8px;
      }

      .shortcut-item {
        font-size: 0.65rem;
      }

      .key {
        padding: 1px 4px;
        font-size: 0.65rem;
      }
    }

    /* Mobile Portrait */
    @media (max-width: 480px) {
      .container {
        padding: 8px;
      }

      h1 {
        font-size: 1.4rem;
        margin-bottom: 3px;
      }

      .header-info {
        gap: 8px;
        margin-top: 5px;
      }

      .progress-bar-container {
        width: 100px;
        height: 6px;
      }

      .group-filter {
        font-size: 0.9rem;
        padding: 6px 12px;
      }

      .card-container {
        max-height: 350px;
      }

      .card-face {
        padding: 15px 12px;
      }

      .card-header {
        font-size: 0.85rem;
        margin-bottom: 8px;
      }

      .card-content {
        font-size: 1.3rem;
        line-height: 1.7;
      }

      .card-back .card-content {
        font-size: 2rem;
      }

      .card-footer {
        font-size: 0.8rem;
        margin-top: 8px;
      }

      .answer-buttons {
        gap: 8px;
        padding-top: 10px;
      }

      .btn-correct,
      .btn-incorrect {
        min-width: 110px;
        font-size: 0.95rem;
        padding: 10px 18px;
      }

      .btn {
        padding: 7px 14px;
        font-size: 0.9rem;
      }

      .controls {
        margin-top: 6px;
        gap: 5px;
      }

      .remaining-cards {
        font-size: 1rem;
        margin-top: 6px;
      }

      .remaining-cards .count {
        font-size: 1.3rem;
      }

      .status-message {
        font-size: 0.95rem;
        padding: 8px;
        margin-top: 6px;
      }

      footer {
        padding: 6px;
        margin-top: 6px;
      }
    }

    /* Landscape Mobile */
    @media (max-height: 600px) and (orientation: landscape) {
      .container {
        padding: 5px;
      }

      h1 {
        font-size: 1.1rem;
        margin-bottom: 2px;
      }

      .header-info {
        gap: 10px;
        margin-top: 3px;
      }

      .card-container {
        max-height: 300px;
      }

      .card-face {
        padding: 12px 15px;
      }

      .card-header {
        font-size: 0.75rem;
        margin-bottom: 5px;
      }

      .card-content {
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .card-back .card-content {
        font-size: 1.4rem;
      }

      .card-footer {
        font-size: 0.7rem;
        margin-top: 5px;
      }

      .answer-buttons {
        padding-top: 8px;
      }

      .btn-correct,
      .btn-incorrect {
        padding: 7px 14px;
        font-size: 0.8rem;
      }

      .controls {
        margin-top: 5px;
      }

      .btn {
        padding: 5px 10px;
        font-size: 0.75rem;
      }

      .remaining-cards {
        font-size: 0.85rem;
        margin-top: 4px;
      }

      footer {
        padding: 4px;
        margin-top: 5px;
        font-size: 0.65rem;
      }

      .shortcuts {
        gap: 8px;
      }

      .shortcut-item {
        font-size: 0.6rem;
      }

      .key {
        font-size: 0.6rem;
        padding: 1px 4px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- ============================================
         HEADER
         ============================================ -->
    <header>
      <h1>å…ƒå·ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</h1>
      <p class="header-subtitle" style="color: var(--text-secondary); font-size: 0.85rem;">ç¤¾ä¼š6å¹´ - æ­´å²ã®å¹´å·ã‚’è¦šãˆã‚ˆã†</p>

      <div class="header-info">
        <div class="progress-info">
          <span>é€²æ—:</span>
          <strong id="current-card">1</strong>
          <span>/</span>
          <span id="total-cards">36</span>
          <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>
          </div>
        </div>

        <select class="group-filter" id="group-filter">
          <option value="all">ã™ã¹ã¦ (36æš)</option>
          <option value="group1">ã‚°ãƒ«ãƒ¼ãƒ—1: é£›é³¥-éŒå€‰ (14æš)</option>
          <option value="group2">ã‚°ãƒ«ãƒ¼ãƒ—2: å®¤ç”º-æ±Ÿæˆ¸ä¸­æœŸ (12æš)</option>
          <option value="group3">ã‚°ãƒ«ãƒ¼ãƒ—3: æ±Ÿæˆ¸æœ«-ç¾ä»£ (10æš)</option>
        </select>
      </div>
    </header>

    <!-- ============================================
         MAIN CARD AREA
         ============================================ -->
    <main>
      <div class="card-container">
        <div class="card" id="flashcard">
          <!-- Front Face -->
          <div class="card-face card-front">
            <div class="card-header">å•é¡Œ 1</div>
            <div class="card-content" id="card-question">
              åˆã‚ã¦å®šã‚ã‚‰ã‚ŒãŸå…ƒå·ã€‚ä¸­å¤§å…„çš‡å­ï¼ˆãªã‹ã®ãŠãŠãˆã®ãŠã†ã˜ï¼‰ã‚’ä¸­å¿ƒã«ã—ãŸä¸€é€£ã®æ”¿æ²»æ”¹é©ã¯ã€ã€‡ã€‡ã®æ”¹æ–°ã€‚
            </div>
            <div class="card-footer">ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç­”ãˆã‚’è¦‹ã‚‹</div>
          </div>

          <!-- Back Face -->
          <div class="card-face card-back">
            <div class="card-header">ç­”ãˆ</div>
            <div class="card-content" id="card-answer">
              å¤§åŒ–ï¼ˆãŸã„ã‹ï¼‰
            </div>

            <!-- Answer Buttons (Inside Card) -->
            <div class="answer-buttons" id="answer-buttons">
              <button class="btn btn-correct" id="btn-correct">
                âœ“ æ­£è§£
              </button>
              <button class="btn btn-incorrect" id="btn-incorrect">
                âœ— ä¸æ­£è§£
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- ============================================
         CONTROLS
         ============================================ -->
    <div class="controls">
      <button class="btn btn-secondary" id="btn-prev">
        â† å‰ã¸
      </button>
      <button class="btn btn-primary" id="btn-flip">
        â†» åè»¢
      </button>
      <button class="btn btn-secondary" id="btn-next">
        æ¬¡ã¸ â†’
      </button>
      <button class="btn btn-secondary" id="btn-random">
        âš„ ãƒ©ãƒ³ãƒ€ãƒ 
      </button>
    </div>

    <!-- Remaining Cards Counter -->
    <div class="remaining-cards" id="remaining-cards">
      æ®‹ã‚Šã®ã‚«ãƒ¼ãƒ‰: <span class="count" id="remaining-count">36</span>æš
    </div>

    <!-- Status Messages -->
    <div class="status-message" id="status-message"></div>

    <!-- ============================================
         FOOTER
         ============================================ -->
    <footer>
      <p>ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ</p>
      <div class="shortcuts">
        <div class="shortcut-item">
          <span class="key">â†</span>
          <span class="key">â†’</span>
          <span>å‰å¾Œã®ã‚«ãƒ¼ãƒ‰</span>
        </div>
        <div class="shortcut-item">
          <span class="key">Space</span>
          <span class="key">Enter</span>
          <span>ã‚«ãƒ¼ãƒ‰ã‚’åè»¢</span>
        </div>
        <div class="shortcut-item">
          <span class="key">O</span>
          <span>æ­£è§£</span>
        </div>
        <div class="shortcut-item">
          <span class="key">X</span>
          <span>ä¸æ­£è§£</span>
        </div>
        <div class="shortcut-item">
          <span class="key">R</span>
          <span>ãƒ©ãƒ³ãƒ€ãƒ </span>
        </div>
      </div>
    </footer>
  </div>

  <!-- ============================================
       FLASHCARD DATA (All 36 cards)
       ============================================ -->
  <script>
    const FLASHCARD_DATA = [
      {
        id: 1,
        index: "01",
        nengo: "å¤§åŒ–",
        reading: "ãŸã„ã‹",
        question: "åˆã‚ã¦å®šã‚ã‚‰ã‚ŒãŸå…ƒå·ã€‚ä¸­å¤§å…„çš‡å­ï¼ˆãªã‹ã®ãŠãŠãˆã®ãŠã†ã˜ï¼‰ã‚’ä¸­å¿ƒã«ã—ãŸä¸€é€£ã®æ”¿æ²»æ”¹é©ã¯ã€ã€‡ã€‡ã®æ”¹æ–°ã€‚",
        answer: "å¤§åŒ–ï¼ˆãŸã„ã‹ï¼‰",
        group: 1
      },
      {
        id: 2,
        index: "02",
        nengo: "å¤§å®",
        reading: "ãŸã„ã»ã†",
        question: "é£›é³¥æ™‚ä»£ã®701å¹´ã«ã€ã€‡ã€‡å¾‹ä»¤ãŒå®šã‚ã‚‰ã‚Œã‚‹ã€‚",
        answer: "å¤§å®ï¼ˆãŸã„ã»ã†ï¼‰",
        group: 1
      },
      {
        id: 3,
        index: "03",
        nengo: "å’ŒéŠ…",
        reading: "ã‚ã©ã†",
        question: "é£›é³¥æ™‚ä»£ã®708å¹´ã«ã€å’ŒåŒé–‹çãŒã¤ãã‚‰ã‚Œã‚‹ã€‚",
        answer: "å’ŒéŠ…ï¼ˆã‚ã©ã†ï¼‰",
        group: 1
      },
      {
        id: 4,
        index: "04",
        nengo: "å¤©å¹³",
        reading: "ã¦ã‚“ã´ã‚‡ã†",
        question: "è–æ­¦å¤©çš‡ãŒç”¨ã„ãŸå…ƒå·ã€‚å¥ˆè‰¯æ™‚ä»£ã®æ–‡åŒ–ã¯ã€‡ã€‡æ–‡åŒ–ã€‚",
        answer: "å¤©å¹³ï¼ˆã¦ã‚“ã´ã‚‡ã†ï¼‰",
        group: 1
      },
      {
        id: 5,
        index: "05",
        nengo: "å»¶æš¦",
        reading: "ãˆã‚“ã‚Šã‚ƒã",
        question: "æ¡“æ­¦å¤©çš‡ãŒç”¨ã„ãŸå…ƒå·ã€‚æœ€æ¾„ãŒæ¯”å¡å±±ã«ã€‡ã€‡å¯ºã‚’å»ºã¦ã€å¤©å°å®—ã‚’ä¼ãˆãŸã€‚",
        answer: "å»¶æš¦ï¼ˆãˆã‚“ã‚Šã‚ƒãï¼‰",
        group: 1
      },
      {
        id: 6,
        index: "06",
        nengo: "æ‰¿å¹³",
        reading: "ã˜ã‚‡ã†ã¸ã„",
        question: "å¹³å®‰æ™‚ä»£ã®935å¹´ã€å¹³å°†é–€ãŒä¸‹ç·å›½ã§åä¹±ã‚’èµ·ã“ã™ã€‚",
        answer: "æ‰¿å¹³ï¼ˆã˜ã‚‡ã†ã¸ã„ï¼‰",
        group: 1
      },
      {
        id: 7,
        index: "07",
        nengo: "å¤©æ…¶",
        reading: "ã¦ã‚“ãã‚‡ã†",
        question: "å¹³å®‰æ™‚ä»£ã®939å¹´ã€è—¤åŸç´”å‹ãŒè¥¿å›½ã§åä¹±ã‚’èµ·ã“ã™ã€‚ (*) å¹³å°†é–€ã®ä¹±ã¨è—¤åŸç´”å‹ã®ä¹±ã‚’ã‚ã‚ã›ã¦ã€æ‰¿å¹³ãƒ»ã€‡ã€‡ã®ä¹±ã¨ã‚ˆã¶ã“ã¨ãŒã‚ã‚‹ã€‚",
        answer: "å¤©æ…¶ï¼ˆã¦ã‚“ãã‚‡ã†ï¼‰",
        group: 1
      },
      {
        id: 8,
        index: "08",
        nengo: "ä¿å…ƒ",
        reading: "ã»ã†ã’ã‚“",
        question: "å¹³å®‰æ™‚ä»£ã®1156å¹´ã€å¤©çš‡ã¨ä¸Šçš‡ã®å¯¾ç«‹ãŒå¼•ããŒã­ã«ãªã£ã¦ã€‡ã€‡ã®ä¹±ãŒèµ·ã“ã‚‹ã€‚",
        answer: "ä¿å…ƒï¼ˆã»ã†ã’ã‚“ï¼‰",
        group: 1
      },
      {
        id: 9,
        index: "09",
        nengo: "å¹³æ²»",
        reading: "ã¸ã„ã˜",
        question: "å¹³å®‰æ™‚ä»£ã®1159å¹´ã€ä¿å…ƒã®ä¹±ã¨ã¨ã‚‚ã«å¤©çš‡æ–¹ã ã£ãŸå¹³æ¸…ç››ã¨æºç¾©æœãŒå¯¾ç«‹ã—ã€ã€‡ã€‡ã®ä¹±ãŒèµ·ã“ã‚‹ã€‚",
        answer: "å¹³æ²»ï¼ˆã¸ã„ã˜ï¼‰",
        group: 1
      },
      {
        id: 10,
        index: "10",
        nengo: "æ‰¿ä¹…",
        reading: "ã˜ã‚‡ã†ãã‚…ã†",
        question: "éŒå€‰æ™‚ä»£ã®1221å¹´ã€å¾Œé³¥ç¾½ä¸Šçš‡ãŒåŒ—æ¡ç¾©æ™‚ã‚’è¨ã¦ã¨å‘½ä»¤ã—ã€ã€‡ã€‡ã®ä¹±ãŒèµ·ã“ã‚‹ã€‚",
        answer: "æ‰¿ä¹…ï¼ˆã˜ã‚‡ã†ãã‚…ã†ï¼‰",
        group: 1
      },
      {
        id: 11,
        index: "11",
        nengo: "è²æ°¸",
        reading: "ã˜ã‚‡ã†ãˆã„",
        question: "éŒå€‰æ™‚ä»£ã®1232å¹´ã€3ä»£åŸ·æ¨©ã®åŒ—æ¡æ³°æ™‚ãŒå¾¡æˆæ•—å¼ç›®(ã€‡ã€‡å¼ç›®)ã‚’å®šã‚ã‚‹ã€‚",
        answer: "è²æ°¸ï¼ˆã˜ã‚‡ã†ãˆã„ï¼‰",
        group: 1
      },
      {
        id: 12,
        index: "12",
        nengo: "æ–‡æ°¸",
        reading: "ã¶ã‚“ãˆã„",
        question: "éŒå€‰æ™‚ä»£ã®1274å¹´ã«ã€å…ƒè»ãŒæ”»ã‚ã¦ããŸã€‡ã€‡ã®å½¹ã€‚",
        answer: "æ–‡æ°¸ï¼ˆã¶ã‚“ãˆã„ï¼‰",
        group: 1
      },
      {
        id: 13,
        index: "13",
        nengo: "å¼˜å®‰",
        reading: "ã“ã†ã‚ã‚“",
        question: "éŒå€‰æ™‚ä»£ã®1281å¹´ã«ã€å…ƒè»ãŒå†ã³æ”»ã‚ã¦ããŸã€‡ã€‡ã®å½¹ã€‚",
        answer: "å¼˜å®‰ï¼ˆã“ã†ã‚ã‚“ï¼‰",
        group: 1
      },
      {
        id: 14,
        index: "14",
        nengo: "æ°¸ä»",
        reading: "ãˆã„ã«ã‚“",
        question: "1297å¹´ã€éŒå€‰å¹•åºœãŒã€‡ã€‡ã®å¾³æ”¿ä»¤ã‚’ç™ºå¸ƒã€‚",
        answer: "æ°¸ä»ï¼ˆãˆã„ã«ã‚“ï¼‰",
        group: 1
      },
      {
        id: 15,
        index: "15",
        nengo: "å»ºæ­¦",
        reading: "ã‘ã‚“ã‚€",
        question: "1334å¹´ã€å¾Œé†é†å¤©çš‡ã¯å…ƒå·ã‚’ã€‡ã€‡ã¨æ”¹ã‚ã€è‡ªã‚‰è¡Œã£ãŸæ”¿æ²»ã¯ã€‡ã€‡ã®æ–°æ”¿ã¨ã‚ˆã°ã‚Œã‚‹ã€‚",
        answer: "å»ºæ­¦ï¼ˆã‘ã‚“ã‚€ï¼‰",
        group: 2
      },
      {
        id: 16,
        index: "16",
        nengo: "æ­£é•·",
        reading: "ã—ã‚‡ã†ã¡ã‚‡ã†",
        question: "å®¤ç”ºæ™‚ä»£ã®1428å¹´ã€è¿‘æ±Ÿå›½ã®é¦¬å€Ÿã‚‰ãŒã€‡ã€‡ã®åœŸä¸€æ†ã‚’èµ·ã“ã™ã€‚",
        answer: "æ­£é•·ï¼ˆã—ã‚‡ã†ã¡ã‚‡ã†ï¼‰",
        group: 2
      },
      {
        id: 17,
        index: "17",
        nengo: "å¿œä»",
        reading: "ãŠã†ã«ã‚“",
        question: "å®¤ç”ºæ™‚ä»£ã®1467å¹´ã€8ä»£å°†è»è¶³åˆ©ç¾©æ”¿ã®ã‚ã¨ç¶™ãäº‰ã„ãªã©ã«ã‚ˆã‚Šã€ã€‡ã€‡ã®ä¹±ãŒèµ·ã“ã‚‹ã€‚",
        answer: "å¿œä»ï¼ˆãŠã†ã«ã‚“ï¼‰",
        group: 2
      },
      {
        id: 18,
        index: "18",
        nengo: "å¤©æ­£",
        reading: "ã¦ã‚“ã—ã‚‡ã†",
        question: "å®‰åœŸãƒ»æ¡ƒå±±æ™‚ä»£ã®1582å¹´ã€ä¹å·ã®ã‚­ãƒªã‚·ã‚¿ãƒ³å¤§åã«ã‚ˆã£ã¦ã€‡ã€‡é£æ¬§ä½¿ç¯€å›£ãŒæ´¾é£ã€‚",
        answer: "å¤©æ­£ï¼ˆã¦ã‚“ã—ã‚‡ã†ï¼‰",
        group: 2
      },
      {
        id: 19,
        index: "19",
        nengo: "æ–‡ç¦„",
        reading: "ã¶ã‚“ã‚ã",
        question: "å®‰åœŸãƒ»æ¡ƒå±±æ™‚ä»£ã®1592å¹´ã€è±Šè‡£ç§€å‰ã«ã‚ˆã‚‹ä¸€åº¦ç›®ã®æœé®®ä¾µç•¥ã¯ã€‡ã€‡ã®å½¹ã€‚",
        answer: "æ–‡ç¦„ï¼ˆã¶ã‚“ã‚ãï¼‰",
        group: 2
      },
      {
        id: 20,
        index: "20",
        nengo: "æ…¶é•·",
        reading: "ã‘ã„ã¡ã‚‡ã†",
        question: "å®‰åœŸãƒ»æ¡ƒå±±æ™‚ä»£ã®1597å¹´ã€è±Šè‡£ç§€å‰ã«ã‚ˆã‚‹äºŒåº¦ç›®ã®æœé®®ä¾µç•¥ã¯ã€‡ã€‡ã®å½¹ã€‚",
        answer: "æ…¶é•·ï¼ˆã‘ã„ã¡ã‚‡ã†ï¼‰",
        group: 2
      },
      {
        id: 21,
        index: "21",
        nengo: "å…ƒå’Œ",
        reading: "ã’ã‚“ãª",
        question: "1615å¹´ã€2ä»£å°†è»å¾³å·ç§€å¿ ã®ã¨ãã«åˆã‚ã¦å®šã‚ã‚‰ã‚ŒãŸæ­¦å®¶è«¸æ³•åº¦ã¯ã€ã€‡ã€‡ä»¤ã¨ã‚‚ã‚ˆã°ã‚Œã‚‹ã€‚",
        answer: "å…ƒå’Œï¼ˆã’ã‚“ãªï¼‰",
        group: 2
      },
      {
        id: 22,
        index: "22",
        nengo: "å¯›æ°¸",
        reading: "ã‹ã‚“ãˆã„",
        question: "1635å¹´ã€3ä»£å°†è»å¾³å·å®¶å…‰ãŒæ”¹ã‚ã€å‚å‹¤äº¤ä»£ã‚’å®šã‚ãŸæ­¦å®¶è«¸æ³•åº¦ã¯ã€ã€‡ã€‡ä»¤ã¨ã‚‚ã‚ˆã°ã‚Œã‚‹ã€‚ç¦ä»¤ã§å¹•åºœé€šé”ãŒå¤§é‡ã«ã¤ãã‚‰ã‚Œã€é–å›½ãŒå…¨å›½ã«æ™®åŠã™ã‚‹ã€‚",
        answer: "å¯›æ°¸ï¼ˆã‹ã‚“ãˆã„ï¼‰",
        group: 2
      },
      {
        id: 23,
        index: "23",
        nengo: "æ˜æš¦",
        reading: "ã‚ã„ã‚Œã",
        question: "æ±Ÿæˆ¸æ™‚ä»£ã®1657å¹´ã€ã€‡ã€‡ã®å¤§ç«ã«ã‚ˆã‚Šã€æ±Ÿæˆ¸åŸã®å¤©å®ˆé–£ãŒç„¼å¤±ã€‚",
        answer: "æ˜æš¦ï¼ˆã‚ã„ã‚Œãï¼‰",
        group: 2
      },
      {
        id: 24,
        index: "24",
        nengo: "å…ƒç¦„",
        reading: "ã’ã‚“ã‚ã",
        question: "5ä»£å°†è»å¾³å·ç¶±å‰ã®ã“ã‚ã®å…ƒå·ã€‚äº•åŸè¥¿é¶´ãƒ»è¿‘æ¾é–€å·¦è¡›é–€ã‚‰ãŒæ´»èºã—ãŸã€‡ã€‡æ–‡åŒ–ã€‚",
        answer: "å…ƒç¦„ï¼ˆã’ã‚“ã‚ãï¼‰",
        group: 2
      },
      {
        id: 25,
        index: "25",
        nengo: "æ­£å¾³",
        reading: "ã—ã‚‡ã†ã¨ã",
        question: "é•·å´ã§ã®è²¿æ˜“ã‚’åˆ¶é™ã™ã‚‹ãªã©ã®æ–°äº•ç™½çŸ³ã«ã‚ˆã‚‹ã€‡ã€‡ã®æ²»ã€‚",
        answer: "æ­£å¾³ï¼ˆã—ã‚‡ã†ã¨ãï¼‰",
        group: 2
      },
      {
        id: 26,
        index: "26",
        nengo: "äº«ä¿",
        reading: "ãã‚‡ã†ã»ã†",
        question: "8ä»£å°†è»å¾³å·å‰å®—ã®ã“ã‚ã®å…ƒå·ã€‚ä¸Šç±³ã®åˆ¶ã€ç›®å®‰ç®±è¨­ç½®ãªã©ã®ã€‡ã€‡ã®æ”¹é©ã€‚",
        answer: "äº«ä¿ï¼ˆãã‚‡ã†ã»ã†ï¼‰",
        group: 2
      },
      {
        id: 27,
        index: "27",
        nengo: "å¤©æ˜",
        reading: "ã¦ã‚“ã‚ã„",
        question: "ã€‡ã€‡ã€œ1787å¹´ã€é•·é›¨ã¨æµ…é–“å±±ã®å™´ç«ãƒ»å†·å®³ãªã©ã«ã‚ˆã‚‹ã€‡ã€‡ã®å¤§ããã‚“ã€‚",
        answer: "1782å¹´ã€å¤©æ˜ï¼ˆã¦ã‚“ã‚ã„ï¼‰",
        group: 3
      },
      {
        id: 28,
        index: "28",
        nengo: "å¯›æ”¿",
        reading: "ã‹ã‚“ã›ã„",
        question: "å¹•åºœã®å­¦æ ¡ã§æœ±å­å­¦ä»¥å¤–ã®è¬›ç¾©ã‚’ç¦ã˜ã‚‹ãªã©ã€è€ä¸­ã®æ¾å¹³å®šä¿¡ã«ã‚ˆã‚‹ã€‡ã€‡ã®æ”¹é©ã€‚",
        answer: "å¯›æ”¿ï¼ˆã‹ã‚“ã›ã„ï¼‰",
        group: 3
      },
      {
        id: 29,
        index: "29",
        nengo: "æ–‡åŒ–ãƒ»æ–‡æ”¿",
        reading: "ã¶ã‚“ã‹ãƒ»ã¶ã‚“ã›ã„",
        question: "åè¿”èˆä¸€ä¹ãƒ»è‘›é£¾åŒ—æ–ãƒ»æ­Œå·åºƒé‡ã‚‰ãŒæ´»èºã—ãŸåŒ–æ”¿æ–‡åŒ–ã€‚",
        answer: "æ–‡åŒ–ãƒ»æ–‡æ”¿ï¼ˆã¶ã‚“ã‹ãƒ»ã¶ã‚“ã›ã„ï¼‰",
        group: 3
      },
      {
        id: 30,
        index: "30",
        nengo: "å¤©ä¿",
        reading: "ã¦ã‚“ã½ã†",
        question: "1837å¹´ã€ã€‡ã€‡ã®å¤§ããã‚“ã§è‹¦ã—ã‚€äººã€…ã‚’æ•‘ãŠã†ã¨èµ·ã“ã•ã‚ŒãŸå¤§å¡©å¹³å…«éƒã®ä¹±ã€‚ æ ªä»²é–“ã®è§£æ•£ãªã©ã€è€ä¸­ã®æ°´é‡å¿ é‚¦ã«ã‚ˆã‚‹ã€‡ã€‡ã®æ”¹é©ã€‚",
        answer: "å¤©ä¿ï¼ˆã¦ã‚“ã½ã†ï¼‰",
        group: 3
      },
      {
        id: 31,
        index: "31",
        nengo: "å®‰æ”¿",
        reading: "ã‚ã‚“ã›ã„",
        question: "1858å¹´ã®æ—¥ç±³ä¿®å¥½é€šå•†æ¡ç´„ã‚’ã¯ã˜ã‚ã¨ã™ã‚‹ã€‡ã€‡ã®äº”ã‹å›½æ¡ç´„ã€å¤§è€ã®äº•ä¼Šç›´å¼¼ã«ã‚ˆã‚‹ã€‡ã€‡ã®å¤§ç„ã€‚",
        answer: "å®‰æ”¿ï¼ˆã‚ã‚“ã›ã„ï¼‰",
        group: 3
      },
      {
        id: 32,
        index: "32",
        nengo: "æ…¶å¿œ",
        reading: "ã‘ã„ãŠã†",
        question: "æ±Ÿæˆ¸æ™‚ä»£ã€æœ€å¾Œã®å…ƒå·ã€‚",
        answer: "æ…¶å¿œï¼ˆã‘ã„ãŠã†ï¼‰",
        group: 3
      },
      {
        id: 33,
        index: "33",
        nengo: "æ˜æ²»",
        reading: "ã‚ã„ã˜",
        question: "ã€‡ã€‡å…ƒå¹´=1868å¹´ã€œã€‡ã€‡45å¹´=1912å¹´",
        answer: "æ˜æ²»ï¼ˆã‚ã„ã˜ï¼‰",
        group: 3
      },
      {
        id: 34,
        index: "34",
        nengo: "å¤§æ­£",
        reading: "ãŸã„ã—ã‚‡ã†",
        question: "ã€‡ã€‡å…ƒå¹´=1912å¹´ã€œã€‡ã€‡15å¹´=1926å¹´",
        answer: "å¤§æ­£ï¼ˆãŸã„ã—ã‚‡ã†ï¼‰",
        group: 3
      },
      {
        id: 35,
        index: "35",
        nengo: "æ˜­å’Œ",
        reading: "ã—ã‚‡ã†ã‚",
        question: "ã€‡ã€‡å…ƒå¹´=1926å¹´ã€œã€‡ã€‡64å¹´=1989å¹´",
        answer: "æ˜­å’Œï¼ˆã—ã‚‡ã†ã‚ï¼‰",
        group: 3
      },
      {
        id: 36,
        index: "36",
        nengo: "å¹³æˆ",
        reading: "ã¸ã„ã›ã„",
        question: "ã€‡ã€‡å…ƒå¹´=1989å¹´ã€œã€‡ã€‡31å¹´=2019å¹´",
        answer: "å¹³æˆï¼ˆã¸ã„ã›ã„ï¼‰",
        group: 3
      }
    ];
  </script>

  <!-- ============================================
       APPLICATION LOGIC
       ============================================ -->
  <script>
    // State Management
    let currentIndex = 0;
    let isFlipped = false;
    let currentFilter = 'all'; // 'all', 'group1', 'group2', 'group3'
    let allCards = [...FLASHCARD_DATA]; // All cards
    let filteredCards = [...FLASHCARD_DATA]; // Cards after filtering
    let learningQueue = [...FLASHCARD_DATA]; // Cards to learn
    let masteredCards = []; // Cards marked as correct

    // DOM Elements
    const flashcard = document.getElementById('flashcard');
    const cardQuestion = document.getElementById('card-question');
    const cardAnswer = document.getElementById('card-answer');
    const currentCardSpan = document.getElementById('current-card');
    const totalCardsSpan = document.getElementById('total-cards');
    const progressBar = document.getElementById('progress-bar');
    const btnPrev = document.getElementById('btn-prev');
    const btnNext = document.getElementById('btn-next');
    const btnFlip = document.getElementById('btn-flip');
    const btnRandom = document.getElementById('btn-random');
    const answerButtons = document.getElementById('answer-buttons');
    const btnCorrect = document.getElementById('btn-correct');
    const btnIncorrect = document.getElementById('btn-incorrect');
    const remainingCount = document.getElementById('remaining-count');
    const statusMessage = document.getElementById('status-message');
    const groupFilter = document.getElementById('group-filter');

    // Initialize
    updateTotalCardsDisplay();
    updateRemainingCount();
    renderCard();

    // Group Filter Change
    groupFilter.addEventListener('change', (e) => {
      currentFilter = e.target.value;
      applyFilter();
    });

    // Apply Filter
    function applyFilter() {
      // Reset learning state
      masteredCards = [];

      // Filter cards based on selected group
      if (currentFilter === 'all') {
        filteredCards = [...allCards];
      } else if (currentFilter === 'group1') {
        filteredCards = allCards.filter(card => card.group === 1);
      } else if (currentFilter === 'group2') {
        filteredCards = allCards.filter(card => card.group === 2);
      } else if (currentFilter === 'group3') {
        filteredCards = allCards.filter(card => card.group === 3);
      }

      // Reset learning queue
      learningQueue = [...filteredCards];
      currentIndex = 0;
      isFlipped = false;

      // Update UI
      updateTotalCardsDisplay();
      updateRemainingCount();
      resetFlip();
      renderCard();
      hideStatusMessage();

      // Show controls again if they were hidden
      flashcard.style.display = 'block';
      document.querySelector('.controls').style.display = 'flex';
      document.getElementById('remaining-cards').style.display = 'block';
    }

    // Update Total Cards Display
    function updateTotalCardsDisplay() {
      totalCardsSpan.textContent = filteredCards.length;
    }

    // Card Rendering
    function renderCard() {
      if (learningQueue.length === 0) {
        showCompletionMessage();
        return;
      }

      const card = learningQueue[currentIndex];
      const cardHeader = flashcard.querySelector('.card-front .card-header');

      cardHeader.textContent = `å•é¡Œ ${card.id}`;
      cardQuestion.textContent = card.question;
      cardAnswer.textContent = card.answer;

      hideStatusMessage();

      updateProgress();
      updateButtons();
    }

    // Update Progress
    function updateProgress() {
      currentCardSpan.textContent = currentIndex + 1;
      const total = learningQueue.length;
      const percentage = total > 0 ? ((currentIndex + 1) / total) * 100 : 100;
      progressBar.style.width = `${percentage}%`;
    }

    // Update Button States
    function updateButtons() {
      btnPrev.disabled = currentIndex === 0;
      btnNext.disabled = currentIndex >= learningQueue.length - 1;
      btnRandom.disabled = learningQueue.length <= 1;
    }

    // Update Remaining Cards Count
    function updateRemainingCount() {
      remainingCount.textContent = learningQueue.length;
    }

    // Flip Card
    function flipCard() {
      isFlipped = !isFlipped;
      flashcard.classList.toggle('flipped');
    }

    // Reset Flip
    function resetFlip() {
      if (isFlipped) {
        isFlipped = false;
        flashcard.classList.remove('flipped');
      }
    }

    // Handle Correct Answer
    function handleCorrect() {
      const card = learningQueue[currentIndex];

      // Move card to mastered pile
      masteredCards.push(card);
      learningQueue.splice(currentIndex, 1);

      // Update UI
      updateRemainingCount();
      showStatusMessage(`æ­£è§£ï¼ æ®‹ã‚Š${learningQueue.length}æš`, 'success');

      // Move to next card or reset if none left
      setTimeout(() => {
        if (learningQueue.length === 0) {
          showCompletionMessage();
        } else {
          // Adjust index if needed
          if (currentIndex >= learningQueue.length) {
            currentIndex = 0;
          }
          resetFlip();
          renderCard();
        }
      }, 1000);
    }

    // Handle Incorrect Answer
    function handleIncorrect() {
      const card = learningQueue[currentIndex];

      // Move card to end of queue
      learningQueue.splice(currentIndex, 1);
      learningQueue.push(card);

      // Update UI
      showStatusMessage('ã‚‚ã†ä¸€åº¦å¾©ç¿’ã—ã¾ã—ã‚‡ã†', 'info');

      // Move to next card
      setTimeout(() => {
        // Adjust index if needed
        if (currentIndex >= learningQueue.length) {
          currentIndex = 0;
        }
        resetFlip();
        renderCard();
      }, 1000);
    }

    // Show Status Message
    function showStatusMessage(message, type) {
      statusMessage.textContent = message;
      statusMessage.className = `status-message visible status-${type}`;
    }

    // Hide Status Message
    function hideStatusMessage() {
      statusMessage.classList.remove('visible');
    }

    // Show Completion Message
    function showCompletionMessage() {
      flashcard.style.display = 'none';

      const filterText = currentFilter === 'all'
        ? `å…¨${filteredCards.length}å•`
        : `${filteredCards.length}å•`;

      showStatusMessage(`ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼${filterText}æ­£è§£ã—ã¾ã—ãŸï¼`, 'success');

      // Show restart button
      const restartBtn = document.createElement('button');
      restartBtn.className = 'btn btn-primary';
      restartBtn.textContent = 'æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™';
      restartBtn.style.marginTop = '20px';
      restartBtn.onclick = restartLearning;

      statusMessage.appendChild(document.createElement('br'));
      statusMessage.appendChild(restartBtn);

      // Hide navigation controls
      document.querySelector('.controls').style.display = 'none';
      document.getElementById('remaining-cards').style.display = 'none';
    }

    // Restart Learning
    function restartLearning() {
      learningQueue = [...filteredCards];
      masteredCards = [];
      currentIndex = 0;
      isFlipped = false;

      flashcard.style.display = 'block';
      document.querySelector('.controls').style.display = 'flex';
      document.getElementById('remaining-cards').style.display = 'block';

      updateRemainingCount();
      hideStatusMessage();
      renderCard();
    }

    // Navigation Functions
    function nextCard() {
      if (currentIndex < learningQueue.length - 1) {
        currentIndex++;
        resetFlip();
        renderCard();
      }
    }

    function prevCard() {
      if (currentIndex > 0) {
        currentIndex--;
        resetFlip();
        renderCard();
      }
    }

    function randomCard() {
      if (learningQueue.length <= 1) return;

      const newIndex = Math.floor(Math.random() * learningQueue.length);
      if (newIndex !== currentIndex) {
        currentIndex = newIndex;
        resetFlip();
        renderCard();
      } else {
        // If same card, try again
        randomCard();
      }
    }

    // Event Listeners - Click
    flashcard.addEventListener('click', flipCard);
    btnFlip.addEventListener('click', (e) => {
      e.stopPropagation();
      flipCard();
    });
    btnPrev.addEventListener('click', prevCard);
    btnNext.addEventListener('click', nextCard);
    btnRandom.addEventListener('click', randomCard);

    // Prevent card flip when clicking answer buttons
    btnCorrect.addEventListener('click', (e) => {
      e.stopPropagation();
      handleCorrect();
    });
    btnIncorrect.addEventListener('click', (e) => {
      e.stopPropagation();
      handleIncorrect();
    });

    // Event Listeners - Keyboard
    document.addEventListener('keydown', (e) => {
      // If card is flipped (showing answer), handle correct/incorrect keys
      if (isFlipped) {
        if (e.key === 'o' || e.key === 'O') {
          e.preventDefault();
          handleCorrect();
          return;
        }
        if (e.key === 'x' || e.key === 'X') {
          e.preventDefault();
          handleIncorrect();
          return;
        }
      }

      switch(e.key) {
        case 'ArrowLeft':
          prevCard();
          break;
        case 'ArrowRight':
          nextCard();
          break;
        case ' ':
        case 'Enter':
          e.preventDefault();
          flipCard();
          break;
        case 'r':
        case 'R':
          randomCard();
          break;
      }
    });

    // Touch Gestures (Swipe)
    let touchStartX = 0;
    let touchEndX = 0;

    flashcard.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });

    flashcard.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    }, { passive: true });

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;

      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0) {
          // Swipe left - next card
          nextCard();
        } else {
          // Swipe right - previous card
          prevCard();
        }
      }
    }
  </script>
</body>
</html>